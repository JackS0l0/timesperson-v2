{% extends 'base.html' %}
{% load i18n %}
{% block main %}
    <main>
        <div class="mainClass">
            <div class="postClass">
                <div class="postHeader">
                    <div class="name">
                        <p>{{object.name}}</p>
                    </div>
                    <div class="info">
                        <a href="{% url 'categoriesDetail' object.category.slug object.category.id %}">{{object.category}}</a>
                        <p class="circle"><i class="bi bi-circle-fill"></i></p>
                        <p>{{object.date|date:"d F, Y"}}</p>
                    </div>
                </div>

                <hr>
                <div class="txtBlock">
                {% if object.img2 %}
                    <div class="img">
                        <img src="{{object.img2}}">
                    </div>
                    <hr>
                {% endif %}
                {% if object.video %}
                    <div class="video">
                        <div id="ytplayer"></div>
                        <script>
                            var tag = document.createElement('script');
                            tag.src = "https://www.youtube.com/player_api";
                            var firstScriptTag = document.getElementsByTagName('script')[0];
                            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                            var player;
                            function onYouTubePlayerAPIReady() {
                                player = new YT.Player('ytplayer', {
                                height: '360',
                                width: '640',
                                videoId: '{{object.video}}'
                                });
                            }
                        </script>
                    </div>
                    <hr>
                {% endif %}
                    {{object.txt|safe}}
                </div>
                <div class="autor">
                    {% if object.autor %}
                        <p>{% trans 'Written by' %} {{object.autor}}</p>
                    {% endif %}
                </div>
                <div class="shareBlock">
                    <div class="links">
                        <a href="#" id="fshare" class="btn" target="_blank"><i class="bi bi-facebook"></i></a>
                        <script>
                            var cu = window.location.href;
                            var hv = "https://www.facebook.com/sharer/sharer.php?u=" + cu;
                            document.getElementById('fshare').href = hv;
                        </script>

                        <a href="#" class="btn" target="_blank"><i class="bi bi-whatsapp"></i></a>
                        <a href="#" class="btn" target="_blank"><i class="bi bi-twitter-x"></i></a>
                        <a href="#" class="btn" target="_blank"><i class="bi bi-linkedin"></i></a>
                        <button onclick="copyUrl()" class="btn" ><i class="bi bi-share-fill"></i></button>
                        <script>
                            function copyUrl() {
                                const url = window.location.href;
                                navigator.clipboard.writeText(url).then(function() {
                                    alert('{% trans "URL copied to clipboard!" %}');
                                }).catch(function(error) {
                                    alert('{% trans "Failed to copy URL:" %} ', error);
                                });
                            }
                        </script>
                    </div>
                </div>
            </div>  
        </div>
    </main>
{% endblock %}